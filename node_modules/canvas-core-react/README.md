## **Prerequisites**

- **NodeJS**: v14.14.0
- **Artifactory**: Please ensure that your NPM is authenticated to access the **BNS Artifactory**. [Click here for more details >](https://confluence.agile.bns/display/JSROCKS/Using+Artifactory)
- **ReactJS**: v16.8 and above, v17.X

## Installation

### 1. Add the library to your npm dependencies

```bash
npm i canvas-core-react
```

### 2. Import the compiled stylesheet into your project

Method 1: Import the styles into the project's global/entry SCSS file. ie: global.scss, index.scss, etc.

```javascript
@import 'canvas-core-react/lib/CanvasStyles.css';
...
```

Method 2: App.js

```javascript
import React from 'react';
import ReactDOM from 'react-dom'
import 'canvas-core-react/lib/CanvasStyles.css';
import '../styles/AppStyles.css'; // Any Canvas overrides should be loaded after CanvasStyles.css
...

const App = () => (
  <div>
    <span>My app!</span>
  </div>
);

ReactDOM.render(
  <App />,
  document.getElementById('root')
);
```

Method 3: index.html

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    ...
    <link
      rel="stylesheet"
      type="text/css"
      href="node_modules/canvas-core-react/lib/CanvasStyles.css"
      media="screen"
    />
    <!-- Any Canvas overrides should be loaded after CanvasStyles.css -->
    <link
      rel="stylesheet"
      type="text/css"
      href="styles/AppStyles.css"
      media="screen"
    />
    ...
  </head>
  ...
</html>
```

### 3. Import a component for usage

- [Storybook](https://core-react-ist.apps.stg.azr-cc-pcf.cloud.bns/storybook/)
- [Component documentation](https://confluence.agile.bns/display/CANVAS/Components)
- [Demo website source code](https://bitbucket.agile.bns/projects/CANVAS/repos/core-react-develop/browse/src/demo/routes)

```javascript
import Button from "canvas-core-react/lib/PrimaryButton";
```

### 4. Wrap your application in the CanvasThemeProvider (optional).

**Note: not all components support dark theme yet**

```javascript
import CanvasThemeProvider from 'canvas-core-react/lib/CanvasThemeProvider';
...
const App = () => (
  <CanvasThemeProvider theme={{ mode: 'dark' }}>
    <App />
  </CanvasThemeProvider>
);
```

### 5. Overriding styled-components styles with className

**Note: not all components use styled components yet. However, the below method will also work for sass.**

```sass
/* YourComponent.scss */
.myclass.myclass {
  // your styles here
}
```

```javascript
/* YourComponent.js */
import Link from 'canvas-core-react/lib/Link';
...
const YourComponent = () => (
  <Link href="" className="myclass">Your link text</Link>
);
```

## **Canvas Styles**

**canvas-core-react styles are exported in several ways:**

**5.0.0**: Canvas is currently in the process of migrating from Sass to styled-components. In the meantime, the library will still export a css stylesheet for components that have not yet been migrated.

1. Single compiled CSS stylesheet
   - All styles (compiled)
   - `canvas-core-react/lib/CanvasStyles.css`
2. Base CSS stylesheet
   - Canvas base styles; includes font styles and resets
   - `canvas-core-react/lib/CanvasBase.css`
3. Fonts CSS stylesheet
   - Canvas fonts; @font-face delcarations
   - `canvas-core-react/lib/CanvasFonts.css`
   - Typically, webpack's [file-loader](https://webpack.js.org/loaders/file-loader/) is used to serve the fonts in an application. ie: `{ test: /\.(woff|woff2)$/, loader: 'file-loader?name=assets/[name].[ext]' },`
4. canvas-core-react Sass (mixins, functions, variables, breakpoints, etc.)
   - `canvas-core-react/lib/scss/CanvasSCSS.scss`
5. Theme SCSS variables

- Variables specific to a theme. ie: primary background color, high emphasis text color, etc.
- To use Canvas' theme tokens in your project, see [canvas-core-react-theme](https://bitbucket.agile.bns/projects/CANVAS/repos/core-react-theme/browse)
- ie: `canvas-core-react-theme/lib/scss/theme/dark.scss`

6. svgs

- There are a few svgs exported by the library that must be served by the consuming application.
- Typically, webpack's [file-loader](https://webpack.js.org/loaders/file-loader/) is used for this. ie: `{ test: /\.(svg|png|jpg|eot|ttf)$/, loader: 'file-loader?name=assets/[hash].[ext]' },`

**Server Side Rendering**

- Canvas uses styled-components for styling, which supports server side rendering. Instructions on how to setup styled-components server side rendering can be found [here](https://styled-components.com/docs/advanced#server-side-rendering). This can be used in tandem with server side rendering with CSS/Sass solutions.
- Note: if you wish to override any Canvas styling with CSS/Sass solutions, you will need to ensure that your application's styles are injected after the styled-component styles (or use more specificity). ie: `const styles = styledComponentsStyles.concat(appStyles)`.

**Optional: Import Canvas Sass**

Importing the Canvas Sass can be achieved in various ways:

1. Import `canvas-core-react/lib/scss/CanvasSCSS.scss` into your project's global/entry SCSS file. ie: global.scss, index.scss, etc

2. If using [webpack](https://webpack.js.org/), you can use [sass-resources-loader](https://www.npmjs.com/package/sass-resources-loader) in the `scss` module rule test:
   ```
   {
     loader: 'sass-resources-loader',
     options: {
       resources: path.resolve(__dirname, 'node_modules/canvas-core-react/lib/scss/CanvasSCSS.scss')
     }
   }
   ```
